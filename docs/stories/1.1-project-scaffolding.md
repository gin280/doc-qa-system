# Story 1.1: 项目脚手架搭建

**Story ID**: 1.1  
**Epic**: 1 - 基础设施与用户认证  
**优先级**: P0 (MVP必须)  
**预估工时**: 2天  
**状态**: Draft

---

## User Story

作为**开发者**,  
我想要**建立Next.js项目基础架构**,  
以便**后续功能开发有统一的技术基础和开发规范**。

---

## 验收标准

### AC1: Next.js项目创建成功
- [x] 使用Next.js 14 (App Router) + TypeScript创建项目
- [x] 项目可以正常运行(`npm run dev`)
- [x] 首页可以正常访问(`http://localhost:3000`)

### AC2: UI组件库集成
- [x] 集成Tailwind CSS配置文件
- [x] 集成shadcn/ui组件库
- [x] 至少安装3个基础组件(Button, Card, Input)

### AC3: 代码规范工具配置
- [x] 配置ESLint规则
- [x] 配置Prettier格式化
- [x] 运行`npm run lint`无错误

### AC4: 项目结构创建
- [x] 创建标准目录结构(src/app, src/components, src/lib等)
- [x] 创建环境变量模板文件(`.env.local.example`)
- [x] 创建基础Layout组件和全局样式

### AC5: Git仓库配置
- [x] 配置`.gitignore`文件
- [x] 提交初始代码到Git仓库
- [x] README.md包含项目说明和启动命令

### AC6: Vercel部署验证
- [x] 项目成功部署到Vercel
- [x] 部署后的URL可以正常访问
- [x] 环境变量配置正确

---

## 技术实现指导

### 架构参考

**相关架构文档**:
- `docs/architecture.md#directory-structure` - 完整目录结构定义
- `docs/architecture.md#technology-stack` - 前端技术栈详情

### 实现步骤

#### 1. 创建Next.js项目

```bash
# 使用create-next-app创建项目
npx create-next-app@latest doc-qa-system --typescript --tailwind --app --src-dir --import-alias "@/*"

cd doc-qa-system
```

#### 2. 配置Tailwind CSS

```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: '#2563EB',
        secondary: '#7C3AED',
      },
    },
  },
  plugins: [],
}
```

#### 3. 集成shadcn/ui

```bash
# 初始化shadcn/ui
npx shadcn-ui@latest init

# 安装基础组件
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add input
```

#### 4. 配置ESLint和Prettier

```json
// .eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn"
  }
}
```

```json
// .prettierrc
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

#### 5. 创建项目目录结构

```bash
# 按照architecture.md#directory-structure创建目录
mkdir -p src/app/(auth)/login
mkdir -p src/app/(auth)/register
mkdir -p src/app/(dashboard)/dashboard
mkdir -p src/app/api/auth
mkdir -p src/components/ui
mkdir -p src/components/auth
mkdir -p src/components/documents
mkdir -p src/components/chat
mkdir -p src/lib
mkdir -p src/hooks
mkdir -p src/services
mkdir -p src/types
mkdir -p src/store
mkdir -p tests/unit
mkdir -p tests/integration
```

#### 6. 创建环境变量模板

```bash
# .env.local.example
# Database
DATABASE_URL=""

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET=""

# OAuth
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# Supabase
NEXT_PUBLIC_SUPABASE_URL=""
NEXT_PUBLIC_SUPABASE_ANON_KEY=""
```

#### 7. 部署到Vercel

```bash
# 1. 安装Vercel CLI
npm i -g vercel

# 2. 登录Vercel
vercel login

# 3. 部署项目
vercel

# 4. 部署到生产环境
vercel --prod
```

---

## 任务分解

### Task 1: 项目创建和基础配置 (4h)
- [ ] 使用create-next-app创建项目
- [ ] 配置TypeScript和Tailwind CSS
- [ ] 验证项目可以正常运行

### Task 2: UI组件库集成 (2h)
- [ ] 初始化shadcn/ui
- [ ] 安装Button、Card、Input组件
- [ ] 创建示例页面验证组件

### Task 3: 代码规范配置 (2h)
- [ ] 配置ESLint规则
- [ ] 配置Prettier
- [ ] 添加lint script到package.json

### Task 4: 项目结构搭建 (3h)
- [ ] 创建完整目录结构
- [ ] 创建基础Layout组件
- [ ] 设置全局样式(globals.css)
- [ ] 创建环境变量模板

### Task 5: Git和部署 (2h)
- [ ] 初始化Git仓库
- [ ] 配置.gitignore
- [ ] 提交初始代码
- [ ] 部署到Vercel并验证

---

## 测试要求

### 单元测试
- 无需单元测试(基础设施搭建)

### 集成测试
- [ ] 验证项目可以构建成功(`npm run build`)
- [ ] 验证ESLint检查通过
- [ ] 验证TypeScript编译无错误

### 手动测试
- [ ] 本地开发服务器正常运行
- [ ] Vercel部署后URL可以访问
- [ ] 确认所有配置文件正确

---

## 依赖关系

**前置依赖**: 无

**后续依赖**: 
- Story 1.2(数据库设计)依赖本Story的项目基础

---

## 技术债务

无

---

## 参考资料

- [Next.js 14 Documentation](https://nextjs.org/docs)
- [shadcn/ui Documentation](https://ui.shadcn.com/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Vercel Deployment Guide](https://vercel.com/docs)

---

**创建日期**: 2025-01-03  
**最后更新**: 2025-01-03  
**负责人**: Development Team

