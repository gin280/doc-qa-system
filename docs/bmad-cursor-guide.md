# Cursor 中使用 BMad 完全指南

## 📚 目录
1. [BMad 简介](#bmad-简介)
2. [安装与配置](#安装与配置)
3. [基础语法](#基础语法)
4. [智能体详解](#智能体详解)
5. [完整工作流程](#完整工作流程)
6. [实战案例](#实战案例)
7. [常见问题](#常见问题)
8. [最佳实践](#最佳实践)
9. [快捷参考](#快捷参考)

---

## 📖 BMad 简介

### 什么是 BMad？
**BMad** (Breakthrough Method for Agile AI-Driven Development) 是一个多智能体开发方法论，提供：

- 🤖 **10+ 专业智能体**：分析师、项目经理、架构师、开发者等
- 📋 **结构化工作流程**：从项目规划到开发实施的完整流程  
- 🔍 **质量保证体系**：内置测试策略和质量门控
- 📄 **文档驱动开发**：PRD、架构文档、用户故事等

### 核心优势
- ✅ **AI驱动开发** - 每个角色都有专门的AI智能体
- ✅ **标准化流程** - 经过验证的开发方法论
- ✅ **质量保证** - 内置测试策略和代码质量检查
- ✅ **文档完整** - 自动生成和维护项目文档

---

## 🛠️ 安装与配置

### 第一步：安装 BMad
```bash
# 在项目根目录执行
npx bmad-method install
```

### 第二步：配置 Cursor 集成
```bash
# 使用 Codex 模式安装（支持 Cursor）
npx bmad-method install -f -i codex -d .
```

### 第三步：验证安装
安装成功后，您的项目应该包含：

```
您的项目/
├── .bmad-core/           # BMad 核心文件
├── AGENTS.md             # 智能体配置文件（重要！）
├── docs/                 # 文档目录
│   ├── architecture.md   # 架构文档
│   ├── prd.md           # 产品需求文档
│   ├── stories/         # 用户故事
│   └── qa/              # 质量保证文档
└── package.json         # 包含 BMad 脚本
```

### 第四步：检查集成状态
```bash
# 列出可用智能体
npx bmad-method list:agents

# 验证配置
npx bmad-method validate
```

---

## 📝 基础语法

### ✅ 正确的调用语法

在 Cursor 中，BMad 使用以下语法：

```bash
As [智能体名称], [您的请求]
```

### 📋 基本示例

```bash
# 调用分析师
As analyst, 帮我分析这个项目的市场机会

# 调用项目经理
As pm, 为这个项目创建PRD

# 调用架构师
As architect, 设计系统架构

# 调用开发者
As dev, 实现用户登录功能

# 调用测试架构师
As qa, 检查代码质量
```

### ❌ 常见错误语法

```bash
# 错误：使用 @ 符号
@analyst 分析项目        ❌

# 错误：使用 / 符号（这是 Claude Code 的语法）
/pm 创建PRD             ❌

# 错误：缺少逗号
As dev 实现功能          ❌
```

---

## 🤖 智能体详解

### 📊 业务分析师 (analyst)
**调用方式**: `As analyst,`

**主要功能**:
- 市场研究和竞品分析
- 头脑风暴和创意探索  
- 项目简报创建
- 用户需求分析

**使用示例**:
```bash
As analyst, 分析待办事项应用的市场竞争情况
As analyst, 帮我进行头脑风暴，探索新功能创意
As analyst, 创建这个项目的详细项目简报
```

### 📋 项目经理 (pm)
**调用方式**: `As pm,`

**主要功能** (产品战略层):
- 创建和管理 PRD（产品需求文档）
- 制定产品策略和发展路线图
- 市场需求分析和竞品策略
- 整体项目规划和里程碑

**什么时候用**:
- ✅ 项目初期，需要整体规划
- ✅ 创建 PRD 文档
- ✅ 制定产品策略和路线图
- ❌ 不用于具体开发执行管理

**使用示例**:
```bash
As pm, 基于项目简报创建完整的PRD
As pm, 制定产品发展路线图和市场策略
As pm, 分析用户需求并规划产品功能
```

### 🏗️ 架构师 (architect)
**调用方式**: `As architect,`

**主要功能**:
- 系统架构设计
- 技术选型和决策
- API 设计和规范
- 基础设施规划

**使用示例**:
```bash
As architect, 为待办事项应用设计技术架构
As architect, 推荐合适的技术栈和框架
As architect, 设计数据库结构和API接口
```

### 💻 开发者 (dev)
**调用方式**: `As dev,`

**主要功能**:
- 代码实现和功能开发
- Bug 修复和重构
- 测试编写和执行
- 技术实施

**使用示例**:
```bash
As dev, 实现用户注册和登录功能
As dev, 修复任务列表显示的bug
As dev, 为核心功能编写单元测试
```

### 🔍 测试架构师 (qa)
**调用方式**: `As qa,`

**主要功能**:
- 质量保证和代码审查
- 测试策略设计
- 风险评估和缓解
- 质量门控决策

**QA专用命令**:
```bash
As qa, *risk {story}      # 风险评估
As qa, *design {story}    # 测试设计
As qa, *trace {story}     # 需求追踪
As qa, *nfr {story}       # 非功能需求检查
As qa, *review {story}    # 全面质量审查
As qa, *gate {story}      # 质量门控决策
```

### 🎨 UX专家 (ux)
**调用方式**: `As ux,`

**主要功能**:
- 用户体验设计
- 界面原型和线框图
- 交互设计规范
- 可用性测试

**使用示例**:
```bash
As ux, 设计任务管理界面的用户体验
As ux, 创建移动端界面的交互原型
As ux, 优化用户注册流程的体验
```

### 📦 产品负责人 (po)
**调用方式**: `As po,`

**主要功能** (开发执行层):
- 将 PRD 分片为用户故事和 Epic
- 用户故事验证和验收
- Sprint 级别的优先级调整
- 开发过程中的产品决策

**什么时候用**:
- ✅ PRD 已完成，需要拆分执行
- ✅ 管理用户故事和 Sprint
- ✅ 验收开发完成的功能
- ❌ 不用于产品策略规划

**使用示例**:
```bash
As po, 将 PRD 分片为可开发的用户故事
As po, 验证登录功能是否符合需求
As po, 调整当前 Sprint 的故事优先级
```

### 🏃 Scrum Master (sm)
**调用方式**: `As sm,`

**主要功能**:
- 敏捷开发管理
- 用户故事拆分
- Sprint 规划和执行
- 团队协调

**使用示例**:
```bash
As sm, 从Epic创建下一个用户故事
As sm, 规划下个Sprint的工作内容
As sm, 协调开发团队的工作分配
```

### 🔄 PM vs PO 使用时机

为了消除混淆，这里明确说明两者的使用时机：

| 时机 | 使用智能体 | 职责 | 典型命令 |
|------|------------|------|----------|
| **项目启动** | `As pm` | 创建 PRD，制定策略 | `As pm, 基于项目简报创建完整PRD` |
| **架构设计后** | `As po` | 将文档分片为故事 | `As po, 将 PRD 分片为用户故事` |
| **开发过程中** | `As po` | 管理故事，验收功能 | `As po, 验证功能是否符合需求` |
| **产品调整** | `As pm` | 策略层面的变更 | `As pm, 调整产品策略和路线图` |

**简单记忆**：
- **PM = 产品规划者** (做什么) → 规划阶段使用
- **PO = 产品执行者** (怎么做) → 执行阶段使用

---

## 🔄 完整工作流程

### 规划阶段流程
```mermaid
graph LR
    A[项目想法] --> B[As analyst 分析]
    B --> C[项目简报]
    C --> D[As pm 创建PRD]
    D --> E[As architect 设计架构]
    E --> F[As po 文档分片]
    F --> G[开始开发]
    
    style D fill:#e1f5fe,stroke:#01579b
    style F fill:#f3e5f5,stroke:#4a148c
```

**具体步骤** (明确角色分工):

**📋 战略规划阶段** (使用 PM):
1. `As analyst, 分析项目市场机会和竞品情况`
2. `As analyst, 创建详细的项目简报`
3. `As pm, 基于项目简报创建完整PRD` ← **PM 负责**
4. `As architect, 设计系统技术架构`

**📦 执行准备阶段** (使用 PO):
5. `As po, 将PRD和架构文档分片为用户故事` ← **PO 负责**

### 开发阶段流程
```mermaid
graph LR
    A[As sm 创建故事] --> B[As qa 风险评估]
    B --> C[As dev 开发实现]
    C --> D[As qa 质量检查]
    D --> E[故事完成]
```

**具体步骤**:
1. `As sm, 从Epic创建下个用户故事`
2. `As qa, *risk 评估开发风险`
3. `As qa, *design 设计测试策略`
4. `As dev, 实现功能和编写测试`
5. `As qa, *review 进行全面质量检查`

---

## 💡 实战案例

### 案例1：新项目启动

**场景**: 您要开发一个待办事项管理应用

**完整流程** (明确 PM/PO 使用时机):

```bash
# === 📋 战略规划阶段 (使用 PM) ===

# 第一步：市场分析
As analyst, 分析待办事项管理应用的市场机会、主要竞品和目标用户

# 第二步：创建项目简报  
As analyst, 基于分析结果创建完整的项目简报

# 第三步：产品需求文档 (PM 负责战略层)
As pm, 基于项目简报创建详细的PRD，包括功能需求和非功能需求

# 第四步：技术架构设计
As architect, 基于PRD设计系统技术架构，包括前端、后端和数据库

# === 📦 执行准备阶段 (切换到 PO) ===

# 第五步：文档分片 (PO 负责执行层)
As po, 将PRD分片为可执行的用户故事和Epic

# 第六步：开始第一个Sprint
As sm, 创建第一个用户故事：用户注册和登录功能
```

**关键转换点**: PRD 和架构完成后，从 PM 切换到 PO 进行具体执行管理

### 案例2：功能开发

**场景**: 实现用户登录功能

```bash
# 第一步：风险评估（可选）
As qa, *risk 用户登录功能的实现

# 第二步：测试设计（可选）
As qa, *design 用户登录功能的测试策略

# 第三步：功能实现
As dev, 实现用户登录功能，包括前端界面、后端API和数据验证

# 第四步：质量检查
As qa, *review 用户登录功能的代码质量和测试覆盖率

# 第五步：质量门控
As qa, *gate 对用户登录功能做最终质量决策
```

### 案例3：项目改进

**场景**: 优化现有功能

```bash
# 第一步：现状分析
As analyst, 分析当前用户反馈，识别需要改进的功能点

# 第二步：UX优化
As ux, 基于用户反馈重新设计任务列表的交互体验

# 第三步：技术优化
As architect, 评估并优化应用的性能和扩展性

# 第四步：实施改进
As dev, 实现UX和架构的优化建议

# 第五步：质量验证
As qa, *review 验证改进是否达到预期效果
```

---

## ❓ 常见问题

### Q1: 为什么我输入命令没有反应？

**可能原因**:
- ✅ 检查语法：确保使用 `As agent,` 格式
- ✅ 检查安装：确认 `AGENTS.md` 文件存在
- ✅ 检查模式：确认使用了 Codex 安装模式

**解决方法**:
```bash
# 重新安装 Codex 模式
npx bmad-method install -f -i codex -d .

# 验证安装
npx bmad-method validate
```

### Q2: 如何知道有哪些智能体可用？

**查看方法**:
```bash
# 命令行查看
npx bmad-method list:agents

# 或查看 AGENTS.md 文件
# 文件位置：项目根目录/AGENTS.md
```

### Q3: 智能体没有按预期工作怎么办？

**调试步骤**:
1. 检查语法是否正确
2. 确认智能体名称是否准确  
3. 查看 `.bmad-core/core-config.yaml` 配置
4. 重新安装 BMad

### Q4: 如何获得命令自动完成？

BMad 在 Cursor 中暂时没有原生自动完成，推荐：

**方法1**: 使用代码片段
- 在 VSCode/Cursor 中创建用户片段
- 设置快捷触发词，如 `bmad-dev` → `As dev, `

**方法2**: 记忆常用命令
- 只记住最常用的几个：`dev`, `pm`, `qa`, `analyst`
- 使用简化的思维模型

**方法3**: 考虑 Claude Code
- Claude Code 对 BMad 有更好的原生支持
- 支持 `/command` 风格的自动完成

### Q5: 项目文档结构是什么？

标准的 BMad 项目结构：
```
项目根目录/
├── .bmad-core/          # BMad 框架文件
├── AGENTS.md            # 智能体配置
├── docs/
│   ├── architecture.md  # 架构文档
│   ├── prd.md          # 产品需求文档  
│   ├── epics/          # 史诗故事
│   ├── stories/        # 用户故事
│   └── qa/             # 质量文档
└── src/                # 源代码
```

---

## 🎯 最佳实践

### 1. 工作流程建议

**规划阶段** (建议在Web UI完成):
- 使用强大的AI模型（Claude Sonnet 4, GPT-4等）
- 完成分析师 → 项目经理 → 架构师的完整流程
- 生成完整的PRD和架构文档

**开发阶段** (在 Cursor 完成):
- 使用 BMad 智能体进行具体实现
- 遵循：故事拆分 → 开发 → 质量检查的循环
- 定期提交代码和文档

### 2. 智能体使用技巧

**明确指令**:
```bash
# ✅ 好的指令
As dev, 实现用户注册功能，包括表单验证、密码加密和邮箱确认

# ❌ 模糊指令  
As dev, 做用户功能
```

**上下文清晰**:
```bash
# ✅ 提供上下文
As qa, *review 用户登录模块，重点检查安全性和错误处理

# ❌ 缺少上下文
As qa, *review 这个
```

**循序渐进**:
```bash
# 先规划再实施
As architect, 设计数据库结构
# ... 等设计完成后 ...
As dev, 基于架构设计实现数据库模型
```

### 3. 质量保证策略

**高风险功能必做**:
```bash
As qa, *risk {关键功能}     # 风险评估
As qa, *design {关键功能}   # 测试设计  
As qa, *review {关键功能}   # 代码审查
```

**开发过程检查**:
```bash
As qa, *trace {功能}        # 需求追踪
As qa, *nfr {功能}          # 非功能需求
```

**完成后必做**:
```bash
As qa, *review {功能}       # 全面审查
As qa, *gate {功能}         # 质量门控
```

### 4. 文档管理建议

- 📋 **保持文档同步** - 代码变更时更新相关文档
- 🔄 **定期检查** - 使用 `As po, *status` 检查项目状态
- 📊 **跟踪进度** - 使用用户故事跟踪开发进度
- 🔍 **质量监控** - 定期运行质量检查

### 5. 团队协作建议

**角色分工** (明确 PM/PO 区别):
- **产品战略经理** → 主要使用 `pm` 智能体 (项目规划阶段)
- **产品执行经理** → 主要使用 `po` 智能体 (开发执行阶段)
- **技术负责人** → 主要使用 `architect`, `qa` 智能体  
- **开发工程师** → 主要使用 `dev`, `qa` 智能体
- **设计师** → 主要使用 `ux`, `analyst` 智能体

**角色使用时序**:
1. **项目初期**: 产品战略经理使用 `As pm` 创建 PRD
2. **执行阶段**: 产品执行经理使用 `As po` 管理开发过程

**沟通协调**:
- 使用 `As sm` 进行项目管理和协调
- 定期进行跨智能体的工作回顾
- 保持文档的及时更新和同步

---

## 📋 快捷参考

### 常用智能体命令

```bash
# 战略规划阶段
As analyst, [分析需求]
As pm, [创建PRD/制定战略]    # 项目规划阶段  
As architect, [设计架构]

# 执行管理阶段
As po, [分片文档/验收功能]   # 开发执行阶段
As sm, [管理Sprint]
As dev, [实现功能]
As ux, [设计界面]  

# 质量控制
As qa, *risk [功能名]      # 风险评估
As qa, *design [功能名]    # 测试设计
As qa, *review [功能名]    # 代码审查
As qa, *gate [功能名]      # 质量门控

# 状态管理
As po, *status            # 项目状态
```

### 项目管理命令

```bash
# 系统状态
npx bmad-method validate         # 验证配置
npx bmad-method list:agents     # 列出智能体  
npx bmad-method refresh          # 刷新配置

# 文档管理 (明确分工)
As pm, 创建和更新PRD文档         # 战略文档 (PM 负责)
As po, 分片PRD为用户故事         # 执行分片 (PO 负责)
As po, 检查开发项目状态          # 执行状态 (PO 负责)
```

### 故障排除

```bash
# 重新安装（解决大多数问题）
npx bmad-method install -f -i codex -d .

# 清理和重新开始
rm -rf .bmad-core AGENTS.md
npx bmad-method install -i codex -d .
```

---

## 📞 获取帮助

- 📖 **用户指南**: `.bmad-core/user-guide.md`
- 🤝 **Discord 社区**: [加入Discord](https://discord.gg/gk8jAdXWmj)
- 🐛 **报告问题**: [GitHub Issues](https://github.com/bmadcode/bmad-method/issues)
- 📺 **视频教程**: [BMadCode频道](https://www.youtube.com/@BMadCode)

---

**版本**: v1.0  
**更新日期**: 2025年9月19日  
**创建者**: BMad Assistant  
**适用版本**: BMad v4.43.1+

*这份指南涵盖了在 Cursor 中使用 BMad 的所有核心功能。建议保存此文档作为日常参考！*
